<!doctype html>
<html lang="ko">


    <head th:replace="common/head"></head>

    <body>
    <nav th:replace="common/navbar"></nav>


        <!-- <div class="collapse navbar-collapse flex-grow-0" id="navbarNav">
            <ul class="navbar-nav">
                <li class="nav-item ">
                    <a th:if="${session.user != null}" class="nav-link" th:href="@{/signout}"
                        th:text="${session.user.nickname} + ' (로그아웃)'"></a>
                    <a th:unless="${session.user != null}" class="nav-link" th:href="@{/}" th:text="로그인"></a>
                </li>
            </ul>
        </div> -->
   
    <div class="container my-3" >
        <table class="table" border="5" bordercolor="red">
            <tr class="text-center thead-dark" bgcolor="yellow">
                <th>글번호</th>
                <th style="width:50%">제목</th>
                <th>글쓴이</th>
                <th>작성일시</th>
                <th>조회수</th>
            </tr>

            <tr th:each="vegan : ${list}" style="text-align: center;">
                <td th:text="${vegan.vId}"></td>
                <td><a th:href="@{/vegan/detail(vId=${vegan.vId})}" th:text="${vegan.vSubject}"></a></td>
                <td th:text="${vegan.user.nickname}"></td>
                <td th:text="${vegan.createDate}"></td>
                <td th:text="${vegan.vHit}"></td>

                
            </tr>
        </table>
    </div>
    <button onclick="location.href='/vegan/create'">글쓰기</button>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script>
        //쿼리 스트링, 쿼리 파라미터
        // ?page=1
        
        let query = location.search;
        
        let page = query.substring(query.indexOf("=")+1);
        
        let startPage = parseInt(page / 5) * 5 + 1;
       
        let endPage = startPage + 4;
        

        
        let html = '<ul class="pagination">';
                                                     
        html += `<li class="page-item"><a class="page-link" href="?page=${startPage-5}">Previous</a></li>`    
        for(let i = startPage; i <= endPage; i++) {
         
        html += 
        `<li class="page-item ${page == i ? 'active' : ' ' }">
            <a class="page-link" href= "?page=${i}">${i}</a>
        </li>`;
        }
        html += `<li class="page-item"><a class="page-link" href="?page=${endPage+1}">Next</a></li>`

        html += '</ul>';
        document.body.innerHTML += html;
        
    </script>

<footer th:replace="common/footer"></footer>


</body>

</html>